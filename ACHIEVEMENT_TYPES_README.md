# üèÜ –¢–∞–±–ª–∏—Ü–∞ –¢–∏–ø–æ–≤ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–π - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üìã –û–±–∑–æ—Ä

–¢–∞–±–ª–∏—Ü–∞ `achievement_types` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –≤ —Å–∏—Å—Ç–µ–º–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫. –≠—Ç–æ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–∏–ø–∞–º–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π, –∏—Ö –æ–ø–∏—Å–∞–Ω–∏—è–º–∏, —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ –∏ –æ—á–∫–∞–º–∏.

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã

### –¢–∞–±–ª–∏—Ü–∞ `achievement_types`

```sql
CREATE TABLE achievement_types (
    id SERIAL PRIMARY KEY,
    uuid UUID NOT NULL UNIQUE DEFAULT gen_random_uuid(),
    name VARCHAR NOT NULL UNIQUE,                    -- –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
    description TEXT NOT NULL,                       -- –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
    category VARCHAR NOT NULL,                       -- –û—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è
    subcategory VARCHAR,                             -- –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è
    requirements TEXT,                               -- –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è
    icon VARCHAR,                                    -- –≠–º–æ–¥–∑–∏ –∏–∫–æ–Ω–∫–∞
    points INTEGER DEFAULT 0,                        -- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—á–∫–æ–≤
    is_active BOOLEAN DEFAULT true,                  -- –ê–∫—Ç–∏–≤–Ω–æ –ª–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
    created_at TIMESTAMP NOT NULL DEFAULT NOW(),     -- –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
    updated_at TIMESTAMP NOT NULL DEFAULT NOW()      -- –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
);
```

### –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```sql
CREATE INDEX idx_achievement_types_category ON achievement_types(category);
CREATE INDEX idx_achievement_types_name ON achievement_types(name);
CREATE INDEX idx_achievement_types_active ON achievement_types(is_active);
```

## üéØ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π

### 1. **–í—Ä–µ–º–µ–Ω–Ω—ã–µ** (2 —Ç–∏–ø–∞)
- **–†–∞–Ω–Ω—è—è –ø—Ç–∞—à–∫–∞** - 5 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ —Å 5 –¥–æ 8 —É—Ç—Ä–∞ (50 –æ—á–∫–æ–≤)
- **–°–æ–≤–∞** - 5 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ —Å 21 –¥–æ 00 (50 –æ—á–∫–æ–≤)

### 2. **–ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–µ** (3 —Ç–∏–ø–∞)
- **–° –ù–æ–≤—ã–º –≥–æ–¥–æ–º** - —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ 1 —è–Ω–≤–∞—Ä—è (100 –æ—á–∫–æ–≤)
- **–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –∂–µ–Ω—Å–∫–∏–π –¥–µ–Ω—å** - —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ 8 –º–∞—Ä—Ç–∞ (100 –æ—á–∫–æ–≤)
- **–ú—É–∂—Å–∫–æ–π –¥–µ–Ω—å** - —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ 23 —Ñ–µ–≤—Ä–∞–ª—è (100 –æ—á–∫–æ–≤)

### 3. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫** (13 —Ç–∏–ø–æ–≤)
- **1 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞** - –ø–µ—Ä–≤–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ (10 –æ—á–∫–æ–≤)
- **3 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏** - —Ç—Ä–µ—Ç—å—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ (20 –æ—á–∫–æ–≤)
- **5 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫** - –ø—è—Ç–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ (30 –æ—á–∫–æ–≤)
- **7 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫** - —Å–µ–¥—å–º–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ (40 –æ—á–∫–æ–≤)
- **10 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫** - –¥–µ—Å—è—Ç–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ (50 –æ—á–∫–æ–≤)
- **15 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫** - –ø—è—Ç–Ω–∞–¥—Ü–∞—Ç–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ (60 –æ—á–∫–æ–≤)
- **20 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫** - –¥–≤–∞–¥—Ü–∞—Ç–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ (70 –æ—á–∫–æ–≤)
- **25 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫** - –¥–≤–∞–¥—Ü–∞—Ç—å –ø—è—Ç–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ (80 –æ—á–∫–æ–≤)
- **30 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫** - —Ç—Ä–∏–¥—Ü–∞—Ç–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ (90 –æ—á–∫–æ–≤)
- **40 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫** - —Å–æ—Ä–æ–∫–æ–≤–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ (100 –æ—á–∫–æ–≤)
- **50 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫** - –ø—è—Ç–∏–¥–µ—Å—è—Ç–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ (120 –æ—á–∫–æ–≤)
- **75 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫** - —Å–µ–º—å–¥–µ—Å—è—Ç –ø—è—Ç–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ (150 –æ—á–∫–æ–≤)
- **100 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫** - —Å–æ—Ç–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ (200 –æ—á–∫–æ–≤)

### 4. **–ù–µ–¥–µ–ª—å–Ω—ã–µ** (5 —Ç–∏–ø–æ–≤)
- **3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é** - 3 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –∑–∞ –Ω–µ–¥–µ–ª—é (40 –æ—á–∫–æ–≤)
- **4 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é** - 4 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –∑–∞ –Ω–µ–¥–µ–ª—é (50 –æ—á–∫–æ–≤)
- **5 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é** - 5 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –∑–∞ –Ω–µ–¥–µ–ª—é (60 –æ—á–∫–æ–≤)
- **6 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é** - 6 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –∑–∞ –Ω–µ–¥–µ–ª—é (70 –æ—á–∫–æ–≤)
- **7 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é** - 7 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –∑–∞ –Ω–µ–¥–µ–ª—é (80 –æ—á–∫–æ–≤)

### 5. **–ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–µ –Ω–µ–¥–µ–ª–∏** (6 —Ç–∏–ø–æ–≤)
- **2 –Ω–µ–¥–µ–ª–∏ –ø–æ–¥—Ä—è–¥** - –º–∏–Ω–∏–º—É–º 1 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –≤ –Ω–µ–¥–µ–ª—é 2 –Ω–µ–¥–µ–ª–∏ –ø–æ–¥—Ä—è–¥ (60 –æ—á–∫–æ–≤)
- **3 –Ω–µ–¥–µ–ª–∏ –ø–æ–¥—Ä—è–¥** - –º–∏–Ω–∏–º—É–º 1 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –≤ –Ω–µ–¥–µ–ª—é 3 –Ω–µ–¥–µ–ª–∏ –ø–æ–¥—Ä—è–¥ (80 –æ—á–∫–æ–≤)
- **4 –Ω–µ–¥–µ–ª–∏ –ø–æ–¥—Ä—è–¥** - –º–∏–Ω–∏–º—É–º 1 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –≤ –Ω–µ–¥–µ–ª—é 4 –Ω–µ–¥–µ–ª–∏ –ø–æ–¥—Ä—è–¥ (100 –æ—á–∫–æ–≤)
- **5 –Ω–µ–¥–µ–ª—å –ø–æ–¥—Ä—è–¥** - –º–∏–Ω–∏–º—É–º 1 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –≤ –Ω–µ–¥–µ–ª—é 5 –Ω–µ–¥–µ–ª—å –ø–æ–¥—Ä—è–¥ (120 –æ—á–∫–æ–≤)
- **6 –Ω–µ–¥–µ–ª—å –ø–æ–¥—Ä—è–¥** - –º–∏–Ω–∏–º—É–º 1 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –≤ –Ω–µ–¥–µ–ª—é 6 –Ω–µ–¥–µ–ª—å –ø–æ–¥—Ä—è–¥ (140 –æ—á–∫–æ–≤)
- **7 –Ω–µ–¥–µ–ª—å –ø–æ–¥—Ä—è–¥** - –º–∏–Ω–∏–º—É–º 1 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –≤ –Ω–µ–¥–µ–ª—é 7 –Ω–µ–¥–µ–ª—å –ø–æ–¥—Ä—è–¥ (160 –æ—á–∫–æ–≤)

### 6. **–ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–µ –º–µ—Å—è—Ü—ã** (10 —Ç–∏–ø–æ–≤)
- **2 –º–µ—Å—è—Ü–∞ –ø–æ–¥—Ä—è–¥** - –º–∏–Ω–∏–º—É–º 1 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –≤ –Ω–µ–¥–µ–ª—é 2 –º–µ—Å—è—Ü–∞ –ø–æ–¥—Ä—è–¥ (200 –æ—á–∫–æ–≤)
- **3 –º–µ—Å—è—Ü–∞ –ø–æ–¥—Ä—è–¥** - –º–∏–Ω–∏–º—É–º 1 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –≤ –Ω–µ–¥–µ–ª—é 3 –º–µ—Å—è—Ü–∞ –ø–æ–¥—Ä—è–¥ (250 –æ—á–∫–æ–≤)
- **4 –º–µ—Å—è—Ü–∞ –ø–æ–¥—Ä—è–¥** - –º–∏–Ω–∏–º—É–º 1 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –≤ –Ω–µ–¥–µ–ª—é 4 –º–µ—Å—è—Ü–∞ –ø–æ–¥—Ä—è–¥ (300 –æ—á–∫–æ–≤)
- **5 –º–µ—Å—è—Ü–µ–≤ –ø–æ–¥—Ä—è–¥** - –º–∏–Ω–∏–º—É–º 1 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –≤ –Ω–µ–¥–µ–ª—é 5 –º–µ—Å—è—Ü–µ–≤ –ø–æ–¥—Ä—è–¥ (350 –æ—á–∫–æ–≤)
- **6 –º–µ—Å—è—Ü–µ–≤ –ø–æ–¥—Ä—è–¥** - –º–∏–Ω–∏–º—É–º 1 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –≤ –Ω–µ–¥–µ–ª—é 6 –º–µ—Å—è—Ü–µ–≤ –ø–æ–¥—Ä—è–¥ (400 –æ—á–∫–æ–≤)
- **7 –º–µ—Å—è—Ü–µ–≤ –ø–æ–¥—Ä—è–¥** - –º–∏–Ω–∏–º—É–º 1 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –≤ –Ω–µ–¥–µ–ª—é 7 –º–µ—Å—è—Ü–µ–≤ –ø–æ–¥—Ä—è–¥ (450 –æ—á–∫–æ–≤)
- **8 –º–µ—Å—è—Ü–µ–≤ –ø–æ–¥—Ä—è–¥** - –º–∏–Ω–∏–º—É–º 1 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –≤ –Ω–µ–¥–µ–ª—é 8 –º–µ—Å—è—Ü–µ–≤ –ø–æ–¥—Ä—è–¥ (500 –æ—á–∫–æ–≤)
- **9 –º–µ—Å—è—Ü–µ–≤ –ø–æ–¥—Ä—è–¥** - –º–∏–Ω–∏–º—É–º 1 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –≤ –Ω–µ–¥–µ–ª—é 9 –º–µ—Å—è—Ü–µ–≤ –ø–æ–¥—Ä—è–¥ (550 –æ—á–∫–æ–≤)
- **10 –º–µ—Å—è—Ü–µ–≤ –ø–æ–¥—Ä—è–¥** - –º–∏–Ω–∏–º—É–º 1 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –≤ –Ω–µ–¥–µ–ª—é 10 –º–µ—Å—è—Ü–µ–≤ –ø–æ–¥—Ä—è–¥ (600 –æ—á–∫–æ–≤)
- **11 –º–µ—Å—è—Ü–µ–≤ –ø–æ–¥—Ä—è–¥** - –º–∏–Ω–∏–º—É–º 1 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –≤ –Ω–µ–¥–µ–ª—é 11 –º–µ—Å—è—Ü–µ–≤ –ø–æ–¥—Ä—è–¥ (650 –æ—á–∫–æ–≤)

### 7. **–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ** (1 —Ç–∏–ø)
- **1 –≥–æ–¥ –±–µ–∑ –ø–µ—Ä–µ—Ä—ã–≤–æ–≤** - –º–∏–Ω–∏–º—É–º 1 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –≤ –Ω–µ–¥–µ–ª—é –≤ —Ç–µ—á–µ–Ω–∏–µ –≥–æ–¥–∞ (1000 –æ—á–∫–æ–≤)

### 8. **–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ** (1 —Ç–∏–ø)
- **–ú–æ—â—å –∏ —Å–∏–ª–∞** - –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∏–ª–æ–≤—ã—Ö —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π (300 –æ—á–∫–æ–≤)

**–í—Å–µ–≥–æ: 41 —Ç–∏–ø –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π**

## üöÄ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ç–∞–±–ª–∏—Ü–µ–π

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –≥–æ—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

#### 1. –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–º–∏
```bash
python create_achievement_types_table.py
```

#### 2. –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–∞–±–ª–∏—Ü—É –¥–µ—Ç–∞–ª—å–Ω–æ
```bash
python view_achievement_types.py
```

#### 3. –ë—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä
```bash
python quick_view_achievement_types.py
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ –ø—Ä—è–º—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã

#### –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
```bash
# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ psql
psql -h localhost -U your_username -d your_database

# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Docker
docker exec -it your_postgres_container psql -U your_username -d your_database
```

#### –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã
```sql
-- –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É
\d achievement_types

-- –ò–ª–∏ —á–µ—Ä–µ–∑ information_schema
SELECT column_name, data_type, is_nullable, column_default
FROM information_schema.columns 
WHERE table_name = 'achievement_types' 
ORDER BY ordinal_position;
```

#### –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
```sql
-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π
SELECT COUNT(*) FROM achievement_types;

-- –í—Å–µ –∑–∞–ø–∏—Å–∏
SELECT * FROM achievement_types ORDER BY category, points DESC;

-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
SELECT * FROM achievement_types WHERE category = '–í—Ä–µ–º–µ–Ω–Ω—ã–µ';

-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Å –≤—ã—Å–æ–∫–∏–º–∏ –æ—á–∫–∞–º–∏
SELECT * FROM achievement_types WHERE points >= 100 ORDER BY points DESC;

-- –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
SELECT * FROM achievement_types WHERE name ILIKE '%–Ω–µ–¥–µ–ª—è%';
```

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
```sql
-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
SELECT 
    category, 
    COUNT(*) as count, 
    AVG(points) as avg_points, 
    SUM(points) as total_points
FROM achievement_types 
GROUP BY category 
ORDER BY total_points DESC;

-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
SELECT 
    subcategory, 
    COUNT(*) as count, 
    AVG(points) as avg_points
FROM achievement_types 
WHERE subcategory IS NOT NULL
GROUP BY subcategory 
ORDER BY count DESC;

-- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –æ—á–∫–∞–º
SELECT 
    MIN(points) as min_points,
    MAX(points) as max_points,
    AVG(points) as avg_points,
    SUM(points) as total_points
FROM achievement_types;
```

## üîß –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π

### –ß–µ—Ä–µ–∑ SQL
```sql
INSERT INTO achievement_types (
    name, 
    description, 
    category, 
    subcategory, 
    requirements, 
    icon, 
    points
) VALUES (
    '–ù–æ–≤–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ',
    '–û–ø–∏—Å–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è',
    '–ù–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è',
    '–ù–æ–≤–∞—è –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è',
    '–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è',
    'üéØ',
    150
);
```

### –ß–µ—Ä–µ–∑ Python
```python
from app.database import async_session_maker
from sqlalchemy import text

async def add_new_achievement_type():
    async with async_session_maker() as session:
        insert_query = text("""
            INSERT INTO achievement_types (
                name, description, category, subcategory, 
                requirements, icon, points
            ) VALUES (
                :name, :description, :category, :subcategory,
                :requirements, :icon, :points
            )
        """)
        
        await session.execute(insert_query, {
            "name": "–ù–æ–≤–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ",
            "description": "–û–ø–∏—Å–∞–Ω–∏–µ",
            "category": "–ö–∞—Ç–µ–≥–æ—Ä–∏—è",
            "subcategory": "–ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è",
            "requirements": "–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è",
            "icon": "üéØ",
            "points": 150
        })
        
        await session.commit()
```

## üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ UI
```sql
SELECT 
    name, description, category, subcategory, 
    requirements, icon, points
FROM achievement_types 
WHERE is_active = true
ORDER BY category, points DESC;
```

### 2. –ù–∞–π—Ç–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
```sql
SELECT * FROM achievement_types 
WHERE subcategory IN ('–ù–∞—á–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å', '–°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å')
ORDER BY points;
```

### 3. –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
```sql
SELECT * FROM achievement_types 
WHERE category = '–í—Ä–µ–º–µ–Ω–Ω—ã–µ'
ORDER BY points DESC;
```

### 4. –ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
```sql
SELECT * FROM achievement_types 
WHERE LOWER(name) LIKE LOWER('%–Ω–µ–¥–µ–ª—è%')
   OR LOWER(description) LIKE LOWER('%–Ω–µ–¥–µ–ª—è%')
   OR LOWER(requirements) LIKE LOWER('%–Ω–µ–¥–µ–ª—è%')
ORDER BY points DESC;
```

### 5. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
```sql
-- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
SELECT 
    COUNT(*) as total_types,
    COUNT(CASE WHEN is_active THEN 1 END) as active_types,
    SUM(points) as total_points,
    AVG(points) as avg_points
FROM achievement_types;

-- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
SELECT 
    category,
    COUNT(*) as types_count,
    AVG(points) as avg_points,
    SUM(points) as total_points
FROM achievement_types 
GROUP BY category 
ORDER BY total_points DESC;
```

## üéØ –°–≤—è–∑—å —Å —Ç–∞–±–ª–∏—Ü–µ–π achievements

–¢–∞–±–ª–∏—Ü–∞ `achievement_types` —è–≤–ª—è–µ—Ç—Å—è —Å–ø—Ä–∞–≤–æ—á–Ω–æ–π –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã `achievements`:

- `achievement_types` - —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–∏–ø—ã –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π (—á—Ç–æ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å)
- `achievements` - —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—ã–¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º (–∫—Ç–æ —á—Ç–æ –ø–æ–ª—É—á–∏–ª)

### –ü—Ä–∏–º–µ—Ä JOIN –∑–∞–ø—Ä–æ—Å–∞
```sql
SELECT 
    a.id,
    a.name as achievement_name,
    a.user_id,
    at.name as type_name,
    at.category,
    at.points,
    at.icon
FROM achievements a
JOIN achievement_types at ON a.name = at.name
WHERE a.user_id = 1
ORDER BY at.points DESC;
```

## üîç –û—Ç–ª–∞–¥–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã
```bash
python quick_view_achievement_types.py
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É
```bash
python view_achievement_types.py
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã
SELECT indexname, indexdef FROM pg_indexes WHERE tablename = 'achievement_types';

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
SELECT schemaname, tablename, n_tup_ins, n_tup_upd, n_tup_del 
FROM pg_stat_user_tables 
WHERE tablename = 'achievement_types';
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –¢–∞–±–ª–∏—Ü–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
```bash
# –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –∑–∞–Ω–æ–≤–æ
python create_achievement_types_table.py
```

### –ü—É—Å—Ç–∞—è —Ç–∞–±–ª–∏—Ü–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–∏–ª—Å—è —É—Å–ø–µ—à–Ω–æ
python view_achievement_types.py
```

### –û—à–∏–±–∫–∏ –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ
```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
SELECT conname, contype, pg_get_constraintdef(oid) 
FROM pg_constraint 
WHERE conrelid = 'achievement_types'::regclass;
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è PostgreSQL](https://www.postgresql.org/docs/)
- [SQLAlchemy ORM](https://docs.sqlalchemy.org/en/14/orm/)
- [PostgreSQL –∏–Ω–¥–µ–∫—Å—ã](https://www.postgresql.org/docs/current/indexes.html)

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø—É—â–µ–Ω–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫—Ä–∏–ø—Ç—ã

---

**–£–¥–∞—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã —Ç–∏–ø–æ–≤ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π! üéâ**





